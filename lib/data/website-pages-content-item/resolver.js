"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _dataConnectorRock = require("@apollosproject/data-connector-rock");

var _serverCore = require("@apollosproject/server-core");

var _lodash = require("lodash");

var _utils = require("../utils");

const resolver = {
  Query: {
    getWebsitePageContentByTitle: async (root, {
      website,
      title
    }, context) => await context.dataSources.WebsitePagesContentItem.getWebsitePageContentByTitle(website, title)
  },
  WebsitePagesContentItem: { ..._dataConnectorRock.ContentItem.resolver.ContentItem,
    metaDescription: async ({
      attributeValues
    }) => (0, _lodash.get)(attributeValues, 'metaDescription.value', ''),
    metaKeywords: async ({
      attributeValues
    }) => (0, _lodash.get)(attributeValues, 'metaKeywords.value', []).split('|').filter(n => {
      return n !== '';
    }),
    openGraphProtocols: ({
      attributeValues
    }) => (0, _utils.parseRockKeyValuePairs)((0, _lodash.get)(attributeValues, 'openGraphProtocols.value', ''), 'content', 'name'),
    twitterProtocols: ({
      attributeValues
    }) => (0, _utils.parseRockKeyValuePairs)((0, _lodash.get)(attributeValues, 'twitterProtocols.value', ''), 'content', 'name')
  }
};

var _default = (0, _serverCore.schemaMerge)(resolver, _dataConnectorRock.ContentItem);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kYXRhL3dlYnNpdGUtcGFnZXMtY29udGVudC1pdGVtL3Jlc29sdmVyLmpzIl0sIm5hbWVzIjpbInJlc29sdmVyIiwiUXVlcnkiLCJnZXRXZWJzaXRlUGFnZUNvbnRlbnRCeVRpdGxlIiwicm9vdCIsIndlYnNpdGUiLCJ0aXRsZSIsImNvbnRleHQiLCJkYXRhU291cmNlcyIsIldlYnNpdGVQYWdlc0NvbnRlbnRJdGVtIiwiQ29udGVudEl0ZW0iLCJtZXRhRGVzY3JpcHRpb24iLCJhdHRyaWJ1dGVWYWx1ZXMiLCJtZXRhS2V5d29yZHMiLCJzcGxpdCIsImZpbHRlciIsIm4iLCJvcGVuR3JhcGhQcm90b2NvbHMiLCJ0d2l0dGVyUHJvdG9jb2xzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBRUEsTUFBTUEsUUFBUSxHQUFHO0FBQ2JDLEVBQUFBLEtBQUssRUFBRTtBQUNIQyxJQUFBQSw0QkFBNEIsRUFBRSxPQUFPQyxJQUFQLEVBQWE7QUFBRUMsTUFBQUEsT0FBRjtBQUFXQyxNQUFBQTtBQUFYLEtBQWIsRUFBaUNDLE9BQWpDLEtBQzFCLE1BQU1BLE9BQU8sQ0FBQ0MsV0FBUixDQUFvQkMsdUJBQXBCLENBQTRDTiw0QkFBNUMsQ0FBeUVFLE9BQXpFLEVBQWtGQyxLQUFsRjtBQUZQLEdBRE07QUFLYkcsRUFBQUEsdUJBQXVCLEVBQUUsRUFDckIsR0FBR0MsK0JBQVlULFFBQVosQ0FBcUJTLFdBREg7QUFFckJDLElBQUFBLGVBQWUsRUFBRSxPQUFPO0FBQUVDLE1BQUFBO0FBQUYsS0FBUCxLQUNiLGlCQUFJQSxlQUFKLEVBQXFCLHVCQUFyQixFQUE4QyxFQUE5QyxDQUhpQjtBQUlyQkMsSUFBQUEsWUFBWSxFQUFFLE9BQU87QUFBRUQsTUFBQUE7QUFBRixLQUFQLEtBQ1YsaUJBQUlBLGVBQUosRUFBcUIsb0JBQXJCLEVBQTJDLEVBQTNDLEVBQ0tFLEtBREwsQ0FDVyxHQURYLEVBRUtDLE1BRkwsQ0FFYUMsQ0FBRCxJQUFPO0FBQ1gsYUFBT0EsQ0FBQyxLQUFLLEVBQWI7QUFDSCxLQUpMLENBTGlCO0FBVXJCQyxJQUFBQSxrQkFBa0IsRUFBRSxDQUFDO0FBQUVMLE1BQUFBO0FBQUYsS0FBRCxLQUNoQixtQ0FDSSxpQkFBSUEsZUFBSixFQUFxQiwwQkFBckIsRUFBaUQsRUFBakQsQ0FESixFQUVJLFNBRkosRUFFZSxNQUZmLENBWGlCO0FBZXJCTSxJQUFBQSxnQkFBZ0IsRUFBRSxDQUFDO0FBQUVOLE1BQUFBO0FBQUYsS0FBRCxLQUNkLG1DQUNJLGlCQUFJQSxlQUFKLEVBQXFCLHdCQUFyQixFQUErQyxFQUEvQyxDQURKLEVBRUksU0FGSixFQUVlLE1BRmY7QUFoQmlCO0FBTFosQ0FBakI7O2VBNEJlLDZCQUFZWCxRQUFaLEVBQXNCUyw4QkFBdEIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRlbnRJdGVtIH0gZnJvbSAnQGFwb2xsb3Nwcm9qZWN0L2RhdGEtY29ubmVjdG9yLXJvY2snO1xuaW1wb3J0IHsgc2NoZW1hTWVyZ2UgfSBmcm9tICdAYXBvbGxvc3Byb2plY3Qvc2VydmVyLWNvcmUnO1xuaW1wb3J0IHtcbiAgICBnZXRcbn0gZnJvbSAnbG9kYXNoJ1xuaW1wb3J0IHsgcGFyc2VSb2NrS2V5VmFsdWVQYWlycyB9IGZyb20gJy4uL3V0aWxzJ1xuXG5jb25zdCByZXNvbHZlciA9IHtcbiAgICBRdWVyeToge1xuICAgICAgICBnZXRXZWJzaXRlUGFnZUNvbnRlbnRCeVRpdGxlOiBhc3luYyAocm9vdCwgeyB3ZWJzaXRlLCB0aXRsZSB9LCBjb250ZXh0KSA9PlxuICAgICAgICAgICAgYXdhaXQgY29udGV4dC5kYXRhU291cmNlcy5XZWJzaXRlUGFnZXNDb250ZW50SXRlbS5nZXRXZWJzaXRlUGFnZUNvbnRlbnRCeVRpdGxlKHdlYnNpdGUsIHRpdGxlKSxcbiAgICB9LFxuICAgIFdlYnNpdGVQYWdlc0NvbnRlbnRJdGVtOiB7XG4gICAgICAgIC4uLkNvbnRlbnRJdGVtLnJlc29sdmVyLkNvbnRlbnRJdGVtLFxuICAgICAgICBtZXRhRGVzY3JpcHRpb246IGFzeW5jICh7IGF0dHJpYnV0ZVZhbHVlcyB9KSA9PlxuICAgICAgICAgICAgZ2V0KGF0dHJpYnV0ZVZhbHVlcywgJ21ldGFEZXNjcmlwdGlvbi52YWx1ZScsICcnKSxcbiAgICAgICAgbWV0YUtleXdvcmRzOiBhc3luYyAoeyBhdHRyaWJ1dGVWYWx1ZXMgfSkgPT5cbiAgICAgICAgICAgIGdldChhdHRyaWJ1dGVWYWx1ZXMsICdtZXRhS2V5d29yZHMudmFsdWUnLCBbXSlcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ3wnKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKG4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gIT09ICcnO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICBvcGVuR3JhcGhQcm90b2NvbHM6ICh7IGF0dHJpYnV0ZVZhbHVlcyB9KSA9PlxuICAgICAgICAgICAgcGFyc2VSb2NrS2V5VmFsdWVQYWlycyhcbiAgICAgICAgICAgICAgICBnZXQoYXR0cmlidXRlVmFsdWVzLCAnb3BlbkdyYXBoUHJvdG9jb2xzLnZhbHVlJywgJycpLFxuICAgICAgICAgICAgICAgICdjb250ZW50JywgJ25hbWUnXG4gICAgICAgICAgICApLFxuICAgICAgICB0d2l0dGVyUHJvdG9jb2xzOiAoeyBhdHRyaWJ1dGVWYWx1ZXMgfSkgPT5cbiAgICAgICAgICAgIHBhcnNlUm9ja0tleVZhbHVlUGFpcnMoXG4gICAgICAgICAgICAgICAgZ2V0KGF0dHJpYnV0ZVZhbHVlcywgJ3R3aXR0ZXJQcm90b2NvbHMudmFsdWUnLCAnJyksXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnLCAnbmFtZSdcbiAgICAgICAgICAgICksXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBzY2hlbWFNZXJnZShyZXNvbHZlciwgQ29udGVudEl0ZW0pXG4iXX0=