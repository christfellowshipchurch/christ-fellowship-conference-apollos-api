"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildGetMock = void 0;

/* eslint-disable import/prefer-default-export */
const buildGetMock = (response, dataSource) => {
  const get = jest.fn();

  if (Array.isArray(response) && Array.isArray(response[0])) {
    response.forEach(responseVal => {
      get.mockReturnValueOnce(new Promise(resolve => resolve(dataSource.normalize(responseVal))));
    });
  }

  get.mockReturnValue(new Promise(resolve => resolve(dataSource.normalize(response))));
  return get;
};

exports.buildGetMock = buildGetMock;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kYXRhL3Rlc3QtdXRpbHMuanMiXSwibmFtZXMiOlsiYnVpbGRHZXRNb2NrIiwicmVzcG9uc2UiLCJkYXRhU291cmNlIiwiZ2V0IiwiamVzdCIsImZuIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsInJlc3BvbnNlVmFsIiwibW9ja1JldHVyblZhbHVlT25jZSIsIlByb21pc2UiLCJyZXNvbHZlIiwibm9ybWFsaXplIiwibW9ja1JldHVyblZhbHVlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDTyxNQUFNQSxZQUFZLEdBQUcsQ0FBQ0MsUUFBRCxFQUFXQyxVQUFYLEtBQTBCO0FBQ3BELFFBQU1DLEdBQUcsR0FBR0MsSUFBSSxDQUFDQyxFQUFMLEVBQVo7O0FBQ0EsTUFBSUMsS0FBSyxDQUFDQyxPQUFOLENBQWNOLFFBQWQsS0FBMkJLLEtBQUssQ0FBQ0MsT0FBTixDQUFjTixRQUFRLENBQUMsQ0FBRCxDQUF0QixDQUEvQixFQUEyRDtBQUN6REEsSUFBQUEsUUFBUSxDQUFDTyxPQUFULENBQWtCQyxXQUFELElBQWlCO0FBQ2hDTixNQUFBQSxHQUFHLENBQUNPLG1CQUFKLENBQ0UsSUFBSUMsT0FBSixDQUFhQyxPQUFELElBQWFBLE9BQU8sQ0FBQ1YsVUFBVSxDQUFDVyxTQUFYLENBQXFCSixXQUFyQixDQUFELENBQWhDLENBREY7QUFHRCxLQUpEO0FBS0Q7O0FBQ0ROLEVBQUFBLEdBQUcsQ0FBQ1csZUFBSixDQUNFLElBQUlILE9BQUosQ0FBYUMsT0FBRCxJQUFhQSxPQUFPLENBQUNWLFVBQVUsQ0FBQ1csU0FBWCxDQUFxQlosUUFBckIsQ0FBRCxDQUFoQyxDQURGO0FBR0EsU0FBT0UsR0FBUDtBQUNELENBYk0iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5leHBvcnQgY29uc3QgYnVpbGRHZXRNb2NrID0gKHJlc3BvbnNlLCBkYXRhU291cmNlKSA9PiB7XG4gIGNvbnN0IGdldCA9IGplc3QuZm4oKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpICYmIEFycmF5LmlzQXJyYXkocmVzcG9uc2VbMF0pKSB7XG4gICAgcmVzcG9uc2UuZm9yRWFjaCgocmVzcG9uc2VWYWwpID0+IHtcbiAgICAgIGdldC5tb2NrUmV0dXJuVmFsdWVPbmNlKFxuICAgICAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVzb2x2ZShkYXRhU291cmNlLm5vcm1hbGl6ZShyZXNwb25zZVZhbCkpKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICBnZXQubW9ja1JldHVyblZhbHVlKFxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiByZXNvbHZlKGRhdGFTb3VyY2Uubm9ybWFsaXplKHJlc3BvbnNlKSkpXG4gICk7XG4gIHJldHVybiBnZXQ7XG59OyJdfQ==